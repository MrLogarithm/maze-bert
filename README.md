# Maze

This project contains an ibex implementation for the Maze task (see http://www.u.arizona.edu/~kforster/MAZE/ for explanation of task) as well as code for creating distractor items for Maze experiments. 

## Ibex
Maze.js and Maze.css together implement the Maze task for ibex.

### Options for Maze: 
* s: Required. The correct sentence, either as a string or an array of words/chunks (same format as for spr). Usually starts with "The"
* a: Required. The alternative (incorrect) options. Can be either a string or an array of words/chunks, needs to have the same number of words/chunks as s. Usually starts with "---". 
* order: An array of 0's and 1's, the same length as s. Indicates whether the correct answer should be the left (0) or right (1) of the two options. If unspecified, will be 0 followed by a pseudorandom order of 0s and 1s (this constrains the first pair to be "The ---" followed by random). Note: the default options means that different participants will see different orders. If you want them to all see the same order, you should specify. 

### Passing results to next item:
When a participant makes an incorrect selection, maze will record the time it took them to do so, but then it will stop that sentence, and pass "failed" to the next element. It is recommended to use "followEachWith" for maze items to follow each with a separator saying whether it was correct or not, so participants know when a new sentence is starting. 

Maze also displays a count of words gotten right so far. If you use the normal separator, the count will reset to 0 at the beginning of each item. If you want the count to be cumulative, you need to use MazeSeparator (.css and .js files included) to separate. All items that intervene between Maze tasks must contain the lines below for cumulative counting to work. 
> var x = this.utils.getValueFromPreviousElement("counter");

> if (x) this.utils.setValueForNextElement("counter",x);

### Result columns: (first seven are same as for other modules)
* 8.Word number: Starting at 0 for the first (no-real-choice) word.
* 9.Word: The text of the correct word.
* 10.Alternative: The text of the incorrect choice.
* 11.Word on (0=left, 1=right): Either 0 or 1 to indicate which side of the screen the correct word was displayed on. 
* 12.Correct: "yes" or "no" depending on whether the participant answered correctly. Note that "no" will be shown for words the participant did not see (i.e. words after the one they got wrong). 
* 13.Reading time: in ms. Reading time is provided for all words a participant saw, but the 0-word reading time is assessed differently (and so may not be comparable with other words in the sentence). Reading times are given for the word a participant gets wrong. "None" is used for words a participant did not see. 
* 14.Sentence. Text of the entire correct sentence. 

## Python tools
maze.py is a command-line runnable python script meant to make it easier to create experiments/ibex data files by automating the creation of distractor items. Input should be a tab-separated file with a first column of sentences and a second column of item labels. 

usage: python maze.py [-h] [-top TOP] [-bottom BOTTOM] [--anagram | --gibber | --nonce] [--allword | --firstdash] Input Output

Take materials and output an ibex maze data file

positional arguments:
* Input: file with input in tsv format,first column sentences, second column item labels
* Output: file to write output to

optional arguments:
* -h, --help: show this help message and exit
* --top TOP, -t TOP: use contents of this file instead of default header 
* --bottom BOTTOM, -b BOTTOM: use contents of this file instead of default footer
* --anagram, -a: use anagrams as distractors
* --gibber, -g: use random letter sequences as distractors
* --nonce, -n: use orthographically legal nonwords as distractors (default)
* --allword, -w: use a normal distractor for the first pair
* --firstdash, -d: use --- as the first distractor (default)

The input file should be in tab separated format; with a first column of sentences, and a second column of item labels.

The program has default header and footer material for making a minimalist runnable data.js file for ibex. You can provide different header and or footer material (see top of python file for defaults), or edit the results afterwards to customize for your experiment. 

Three options for distractor creation are provided:
* --nonce (the default) is length-matched orthographically legal non-words (chosen at random from a list generated by Wuggy http://crr.ugent.be/programs-data/wuggy). 
* --gibber is length-matched strings of random letters. 
* --anagram is an anagram of the target word. When non-word anagrams do not exist, will give a warning and use gibber for that word instead.
For all three, single letter distractors are random letters that are not a,i, or o. Distractors two letters or longer are guaranteed to not be in Celex. 

Two options for the first distractor are provided:
* --firstdash (default) replaces the distractor for the first word in each sentence with three dashes (---) to match common use
* --allword provides a normal distractor for the first word, according to the distractor option specified. 
